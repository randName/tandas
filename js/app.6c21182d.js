(function(t){function e(e){for(var n,o,i=e[0],c=e[1],l=e[2],d=0,v=[];d<i.length;d++)o=i[d],r[o]&&v.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);var n=a("2b0e"),r=a("bb71");a("da64");n["a"].use(r["a"],{iconfont:"md"});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{dark:t.dark}},[a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-title",{staticClass:"headline"},[a("span",[t._v("Tandas")])]),a("v-spacer"),a("v-chip",[a("v-avatar",[a("v-icon",{attrs:{color:t.status.color},domProps:{textContent:t._s(t.status.icon)}})],1),t._v("\n      "+t._s(t.status.text)+"\n    ")],1)],1),a("v-content",[a("v-container",{attrs:{fluid:"","grid-list-lg":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Quick Actions")]),a("v-card-actions",[a("v-btn",{attrs:{fab:"",small:""},on:{click:function(e){t.dark=!t.dark}}},[a("v-icon",[t._v("brightness_4")])],1),a("v-spacer"),a("v-dialog",{attrs:{persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",fab:"",small:"",color:"primary",disabled:t.status.used},slot:"activator"},[a("v-icon",[t._v("directions_run")])],1),a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Go Toilet")]),a("v-card-text",[a("v-btn",{attrs:{block:"",large:"",color:"primary",disabled:t.request.wait},on:{click:t.use}},[t._v("\n                      "+t._s(t.request.text)+"\n                    ")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:t.status.used},on:{click:function(e){t.dialog=!1}}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-expansion-panel",[a("v-expansion-panel-content",[a("div",{staticClass:"headline",attrs:{slot:"header"},slot:"header"},[t._v("Recent")]),a("v-list",[t._l(t.recent,function(e,n){return[a("v-list-tile",{key:e.ts},[a("v-chip",[a("v-avatar",[a("v-icon",[t._v("schedule")])],1),t._v("\n                    "+t._s(t.showTime(e.start))+"\n                  ")],1),e.end?a("v-chip",[a("v-avatar",[a("v-icon",[t._v("timer")])],1),t._v("\n                    "+t._s(e.duration)+" min\n                  ")],1):t._e(),a("v-list-tile-content"),a("v-list-tile-action",[e.end?a("v-btn",{attrs:{icon:"",disabled:""}},[a("v-icon",[t._v("done")])],1):a("v-progress-circular",{attrs:{indeterminate:"",size:"24"}})],1)],1),n<t.recent.length-1?a("v-divider",{key:n}):t._e()]})],2)],1)],1)],1)],1)],1)],1)],1)},o=[],i=a("59ca"),c=a.n(i);a("e71f");const l="lpa-sg",u={projectId:l,storageBucket:`${l}.appspot.com`,authDomain:`${l}.firebaseapp.com`,apiKey:"AIzaSyCIGQm_zITYXFm6BFHQuxikndRmHoewQNo",databaseURL:`https://${l}.firebaseio.com`,messagingSenderId:"224727383490"},d=new Date;d.setHours(d.getHours()-6),d.setMinutes(0),d.setSeconds(0),c.a.initializeApp(u);const v=c.a.firestore();v.settings({timestampsInSnapshots:!0});const p=v.collection("door"),f=p.where("ts",">",d).orderBy("ts");var h=function(){return{door:p,activity:f}},b={data(){return{dark:!0,activity:[],dialog:!1,request:{wait:!1,text:"Start"}}},firestore:h,computed:{recent(){const t=null;return this.activity.map(t=>({...t,ts:t.ts.seconds})).reduce((e,a)=>{return e[0].start?a.oc||(e[0].end=a.ts,e[0].duration=Math.round((a.ts-e[0].start)/6,1)/10,e.unshift({duration:t})):a.oc&&(e[0].start=a.ts),e},[{duration:t}]).filter(t=>t.start).slice(0,5)},status(){const t=this.recent[0],e=t?!t.end:null,a=e?"error":"success",n=t?(e?"remove":"check")+"_circle":"sync",r=t?"Since "+this.showTime(t.end||t.start):"Getting status ...";return{used:e,text:r,icon:n,color:a}}},methods:{use(){const t=this.status.used;this.request.wait=!0,this.request.text=t?"Start":"End",this.$firestoreRefs.door.add({ts:new Date,oc:!t}).then(()=>{this.request.wait=!1,t&&(this.dialog=!1)})},showTime(t){const e=new Date(1e3*t),a=["Hours","Minutes"].map(t=>e["get"+t]());return a.map(t=>(t>9?"":"0")+t).join(":")}}},m=b,_=a("2877"),g=a("6544"),y=a.n(g),x=a("7496"),V=a("8212"),w=a("8336"),k=a("b0af"),C=a("99d9"),T=a("12b2"),S=a("cc20"),j=a("a523"),O=a("549c"),P=a("169a"),A=a("ce7e"),I=a("cd55"),M=a("49e2"),q=a("0e8f"),D=a("132d"),L=a("a722"),$=a("8860"),H=a("ba95"),z=a("40fe"),B=a("5d23"),E=a("490a"),Q=a("9910"),R=a("71d9"),F=a("2a7f"),G=Object(_["a"])(m,s,o,!1,null,null,null);G.options.__file="App.vue";var J=G.exports;y()(G,{VApp:x["a"],VAvatar:V["a"],VBtn:w["a"],VCard:k["a"],VCardActions:C["a"],VCardText:C["b"],VCardTitle:T["a"],VChip:S["a"],VContainer:j["a"],VContent:O["a"],VDialog:P["a"],VDivider:A["a"],VExpansionPanel:I["a"],VExpansionPanelContent:M["a"],VFlex:q["a"],VIcon:D["a"],VLayout:L["a"],VList:$["a"],VListTile:H["a"],VListTileAction:z["a"],VListTileContent:B["a"],VProgressCircular:E["a"],VSpacer:Q["a"],VToolbar:R["a"],VToolbarTitle:F["a"]});var K=a("0ff2");n["a"].config.productionTip=!1,n["a"].use(K["a"]),new n["a"]({render:t=>t(J)}).$mount("#app")}});